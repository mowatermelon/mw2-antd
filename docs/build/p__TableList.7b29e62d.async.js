(self.webpackChunkmw2_antd=self.webpackChunkmw2_antd||[]).push([[947],{2614:function(Se,k,s){"use strict";s.r(k),s.d(k,{default:function(){return Fe}});var we=s(57338),q=s(25084),Ce=s(57663),P=s(71577),Re=s(47673),_=s(4107),ee=s(93224),A=s(2824),j=s(11849),He=s(34792),Z=s(48086),v=s(3182),ae=s(94043),i=s.n(ae),te=s(49101),R=s(67294),l=s(21010),re=s(81907),se=s(85224),ne=s(40358),le=s(37476),W=s(5966),G=s(90672),ue=s(96459),Ae=s(71194),ie=s(5644),L=s(3843),N=s(64317),de=s(86615),oe=s(22452),e=s(85893),ce=function(n){var r=(0,l.YB)();return(0,e.jsxs)(L.Z,{stepsProps:{size:"small"},stepsFormRender:function(o,a){return(0,e.jsx)(ie.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:r.formatMessage({id:"pages.searchTable.updateForm.ruleConfig",defaultMessage:"\u89C4\u5219\u914D\u7F6E"}),visible:n.updateModalVisible,footer:a,onCancel:function(){n.onCancel()},children:o})},onFinish:n.onSubmit,children:[(0,e.jsxs)(L.Z.StepForm,{initialValues:{name:n.values.name,desc:n.values.desc},title:r.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,e.jsx)(W.Z,{name:"name",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u89C4\u5219\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,e.jsx)(l._H,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"})}]}),(0,e.jsx)(G.Z,{name:"desc",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,e.jsx)(l._H,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]}),(0,e.jsxs)(L.Z.StepForm,{initialValues:{target:"0",template:"0"},title:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.title",defaultMessage:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027"}),children:[(0,e.jsx)(N.Z,{name:"target",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(N.Z,{name:"template",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.templateLabel",defaultMessage:"\u89C4\u5219\u6A21\u677F"}),valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(de.Z.Group,{name:"type",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.typeLabel",defaultMessage:"\u89C4\u5219\u7C7B\u578B"}),options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(L.Z.StepForm,{initialValues:{type:"1",frequency:"month"},title:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.title",defaultMessage:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F"}),children:[(0,e.jsx)(oe.Z,{name:"time",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.timeLabel",defaultMessage:"\u5F00\u59CB\u65F6\u95F4"}),rules:[{required:!0,message:(0,e.jsx)(l._H,{id:"pages.searchTable.updateForm.schedulingPeriod.timeRules",defaultMessage:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"})}]}),(0,e.jsx)(N.Z,{name:"frequency",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},fe=ce,me=s(86582),pe=s(30381),Y=s.n(pe),he=function(n,r){for(var t=[],o=0;o<r;o+=1){var a=(n-1)*10+o;t.push({key:a,disabled:o%6==0,href:"https://ant.design",avatar:["https://gw.alipayobjects.com/zos/rmsportal/eeHMaZBwmTvLdIwMfBpg.png","https://gw.alipayobjects.com/zos/rmsportal/udxAbMEhpwthVVcjLXik.png"][o%2],name:"TradeCode ".concat(a),owner:"\u66F2\u4E3D\u4E3D",desc:"\u8FD9\u662F\u4E00\u6BB5\u63CF\u8FF0",callNo:Math.floor(Math.random()*1e3),status:Math.floor(Math.random()*10)%4,updatedAt:Y()().format("YYYY-MM-DD"),createdAt:Y()().format("YYYY-MM-DD"),progress:Math.ceil(Math.random()*100)})}return t.reverse(),t},T=he(1,100);function ge(u){return V.apply(this,arguments)}function V(){return V=(0,v.Z)(i().mark(function u(n){var r,t,o,a,f,g,F,$;return i().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return r=n.current,t=r===void 0?1:r,o=n.pageSize,a=o===void 0?10:o,f=(0,me.Z)(T).slice((t-1)*a,t*a),n.sorter&&(g=JSON.parse(n.sorter),f=f.sort(function(M,m){var C=0;return Object.keys(g).forEach(function(x){if(g[x]==="descend"){M[x]-m[x]>0?C+=-1:C+=1;return}M[x]-m[x]>0?C+=1:C+=-1}),C})),n.filter&&(F=JSON.parse(n.filter),Object.keys(F).length>0&&(f=f.filter(function(M){return Object.keys(F).some(function(m){return!!(!F[m]||F[m].includes("".concat(M[m])))})}))),n.name&&(f=f.filter(function(M){var m;return M==null||(m=M.name)===null||m===void 0?void 0:m.includes(n.name||"")})),$={data:f,total:T.length,success:!0,pageSize:a,current:parseInt("".concat(n.current),10)||1},w.abrupt("return",$);case 7:case"end":return w.stop()}},u)})),V.apply(this,arguments)}function E(u){var n=u.method,r=u.name,t=u.desc,o=u.key;switch(n){case"delete":{T=T.filter(function(f){return o.indexOf(f.key)===-1});break}case"post":{(function(){var f=Math.ceil(Math.random()*1e4),g={key:T.length,href:"https://ant.design",avatar:["https://gw.alipayobjects.com/zos/rmsportal/eeHMaZBwmTvLdIwMfBpg.png","https://gw.alipayobjects.com/zos/rmsportal/udxAbMEhpwthVVcjLXik.png"][f%2],name:r,owner:"\u66F2\u4E3D\u4E3D",desc:t,callNo:Math.floor(Math.random()*1e3),status:Math.floor(Math.random()*10)%2,updatedAt:Y()().format("YYYY-MM-DD"),createdAt:Y()().format("YYYY-MM-DD"),progress:Math.ceil(Math.random()*100)};T.unshift(g)})();break}case"update":{(function(){var f={};T=T.map(function(g){return g.key===o?(f=(0,j.Z)((0,j.Z)({},g),{},{desc:t,name:r}),(0,j.Z)((0,j.Z)({},g),{},{desc:t,name:r})):g})})();break}default:break}var a={list:T,pagination:{total:T.length}};return a}function ve(u){return I.apply(this,arguments)}function I(){return I=(0,v.Z)(i().mark(function u(n){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",E((0,j.Z)({method:"update"},n)));case 1:case"end":return t.stop()}},u)})),I.apply(this,arguments)}function Me(u){return O.apply(this,arguments)}function O(){return O=(0,v.Z)(i().mark(function u(n){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",E((0,j.Z)({method:"post"},n)));case 1:case"end":return t.stop()}},u)})),O.apply(this,arguments)}function be(u){return z.apply(this,arguments)}function z(){return z=(0,v.Z)(i().mark(function u(n){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",E((0,j.Z)({method:"delete"},n)));case 1:case"end":return t.stop()}},u)})),z.apply(this,arguments)}var je=function(){var u=(0,v.Z)(i().mark(function n(r){var t;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=Z.default.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,Me((0,j.Z)({},r));case 4:return t(),Z.default.success("Added successfully"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),t(),Z.default.error("Adding failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},n,null,[[1,9]])}));return function(r){return u.apply(this,arguments)}}(),Te=function(){var u=(0,v.Z)(i().mark(function n(r){var t;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=Z.default.loading("Configuring"),a.prev=1,a.next=4,ve({name:r.name,desc:r.desc,key:r.key});case 4:return t(),Z.default.success("Configuration is successful"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),t(),Z.default.error("Configuration failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},n,null,[[1,9]])}));return function(r){return u.apply(this,arguments)}}(),ye=function(){var u=(0,v.Z)(i().mark(function n(r){var t;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=Z.default.loading("\u6B63\u5728\u5220\u9664"),r){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,be({key:r.map(function(f){return f.key})});case 6:return t(),Z.default.success("Deleted successfully and will refresh soon"),a.abrupt("return",!0);case 11:return a.prev=11,a.t0=a.catch(3),t(),Z.default.error("Delete failed, please try again"),a.abrupt("return",!1);case 16:case"end":return a.stop()}},n,null,[[3,11]])}));return function(r){return u.apply(this,arguments)}}(),Ze=function(){var n=(0,R.useState)(!1),r=(0,A.Z)(n,2),t=r[0],o=r[1],a=(0,R.useState)(!1),f=(0,A.Z)(a,2),g=f[0],F=f[1],$=(0,R.useState)(!1),U=(0,A.Z)($,2),w=U[0],M=U[1],m=(0,R.useRef)(),C=(0,R.useState)(),x=(0,A.Z)(C,2),b=x[0],D=x[1],xe=(0,R.useState)([]),J=(0,A.Z)(xe,2),H=J[0],X=J[1],B=(0,l.YB)(),K=[{title:(0,e.jsx)(l._H,{id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"Rule name"}),dataIndex:"name",tip:"The rule name is the unique key",render:function(d,c){return(0,e.jsx)("a",{onClick:function(){D(c),M(!0)},children:d})}},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.titleDesc",defaultMessage:"Description"}),dataIndex:"desc",valueType:"textarea"},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.titleCallNo",defaultMessage:"Number of service calls"}),dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:function(d){return"".concat(d).concat(B.formatMessage({id:"pages.searchTable.tenThousand",defaultMessage:" \u4E07 "}))}},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.titleStatus",defaultMessage:"Status"}),dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:(0,e.jsx)(l._H,{id:"pages.searchTable.nameStatus.default",defaultMessage:"Shut down"}),status:"Default"},1:{text:(0,e.jsx)(l._H,{id:"pages.searchTable.nameStatus.running",defaultMessage:"Running"}),status:"Processing"},2:{text:(0,e.jsx)(l._H,{id:"pages.searchTable.nameStatus.online",defaultMessage:"Online"}),status:"Success"},3:{text:(0,e.jsx)(l._H,{id:"pages.searchTable.nameStatus.abnormal",defaultMessage:"Abnormal"}),status:"Error"}}},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.titleUpdatedAt",defaultMessage:"Last scheduled time"}),sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(d,c,y){var S=c.defaultRender,h=(0,ee.Z)(c,["defaultRender"]),Q=y.getFieldValue("status");return"".concat(Q)==="0"?!1:"".concat(Q)==="3"?(0,e.jsx)(_.Z,(0,j.Z)((0,j.Z)({},h),{},{placeholder:B.formatMessage({id:"pages.searchTable.exception",defaultMessage:"Please enter the reason for the exception!"})})):S(d)}},{title:(0,e.jsx)(l._H,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(d,c){return[(0,e.jsx)("a",{onClick:function(){F(!0),D(c)},children:(0,e.jsx)(l._H,{id:"pages.searchTable.config",defaultMessage:"Configuration"})},"config"),(0,e.jsx)("a",{href:"https://procomponents.ant.design/",children:(0,e.jsx)(l._H,{id:"pages.searchTable.subscribeAlert",defaultMessage:"Subscribe to alerts"})},"subscribeAlert")]}}];return(0,e.jsxs)(re.ZP,{children:[(0,e.jsx)(ne.ZP,{headerTitle:B.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:m,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(P.Z,{type:"primary",onClick:function(){o(!0)},children:[(0,e.jsx)(te.Z,{})," ",(0,e.jsx)(l._H,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:ge,columns:K,rowSelection:{onChange:function(d,c){X(c)}}}),(H==null?void 0:H.length)>0&&(0,e.jsxs)(se.Z,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(l._H,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:H.length})," ",(0,e.jsx)(l._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,e.jsxs)("span",{children:[(0,e.jsx)(l._H,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",H.reduce(function(p,d){return p+d.callNo},0)," ",(0,e.jsx)(l._H,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:[(0,e.jsx)(P.Z,{onClick:(0,v.Z)(i().mark(function p(){var d,c;return i().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,ye(H);case 2:X([]),(d=m.current)===null||d===void 0||(c=d.reloadAndRest)===null||c===void 0||c.call(d);case 4:case"end":return S.stop()}},p)})),children:(0,e.jsx)(l._H,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})}),(0,e.jsx)(P.Z,{type:"primary",children:(0,e.jsx)(l._H,{id:"pages.searchTable.batchApproval",defaultMessage:"Batch approval"})})]}),(0,e.jsxs)(le.Z,{title:B.formatMessage({id:"pages.searchTable.createForm.newRule",defaultMessage:"New rule"}),width:"400px",visible:t,onVisibleChange:o,onFinish:function(){var p=(0,v.Z)(i().mark(function d(c){var y;return i().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,je(c);case 2:y=h.sent,y&&(o(!1),m.current&&m.current.reload());case 4:case"end":return h.stop()}},d)}));return function(d){return p.apply(this,arguments)}}(),children:[(0,e.jsx)(W.Z,{rules:[{required:!0,message:(0,e.jsx)(l._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],width:"md",name:"name"}),(0,e.jsx)(G.Z,{width:"md",name:"desc"})]}),(0,e.jsx)(fe,{onSubmit:function(){var p=(0,v.Z)(i().mark(function d(c){var y;return i().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Te(c);case 2:y=h.sent,y&&(F(!1),D(void 0),m.current&&m.current.reload());case 4:case"end":return h.stop()}},d)}));return function(d){return p.apply(this,arguments)}}(),onCancel:function(){F(!1),w||D(void 0)},updateModalVisible:g,values:b||{}}),(0,e.jsx)(q.Z,{width:600,visible:w,onClose:function(){D(void 0),M(!1)},closable:!1,children:(b==null?void 0:b.name)&&(0,e.jsx)(ue.Z,{column:2,title:b==null?void 0:b.name,request:(0,v.Z)(i().mark(function p(){return i().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",{data:b||{}});case 1:case"end":return c.stop()}},p)})),params:{id:b==null?void 0:b.name},columns:K})})]})},Fe=Ze}}]);
